See https://rawgit.com/xproc/notes/master/design/xmpl.html for an explanation of what's going on here
